# WebLarek

## 1. Структура проекта

Проект реализован в архитектуре MVC. Основные папки:

- `components/` — содержит модули приложения, распределённые по слоям архитектуры;
  - `base/` — общие утилиты: API-клиент, EventEmitter и прочее;
  - `models/` — бизнес-логика, сущности, модели данных;
  - `views/` — представления (View), шаблоны и управление DOM;
  - `controllers/` — связывают модели и представления.
- `scss/` — стили приложения;
- `utils/` — вспомогательные функции и константы.
- `images/` — иконки и графика.
- `index.ts` — точка входа.
- `index.html` — базовый HTML-шаблон приложения.

## 2. Важные файлы

- `index.ts` — точка входа, инициализация API, событий и корневого контейнера.
- `api.ts` — обёртка над `fetch`, реализует общение с сервером.
- `events.ts` — собственный EventEmitter, обеспечивает взаимодействие между слоями.
- `constants.ts` — содержит базовые константы, такие как `API_URL`.
- `utils.ts` — общие утилиты: проверка наличия элемента в DOM, обработка данных и т.д.

## 3. Архитектура и классы

### EventEmitter (base) — слой инфраструктуры
Обеспечивает передачу событий между компонентами. Используется для связи контроллеров, моделей и представлений. 
Пример событий:
- `user:login` — логин пользователя;
- `cart:add` — добавление товара в корзину;
- `modal:open` — открытие модального окна.

### Api — слой инфраструктуры
Работает с API. Методы:
- `get(url)` — GET-запрос;
- `post(url, data)` — POST-запрос и т.п.

### Модели (Model)
#### ProductModel
- Хранит данные о товаре;
- Методы: `parse()`, `getPrice()`, `getCategory()` и т.п.

#### CartModel
- Хранит список товаров в корзине и их количество;
- Методы: `addItem()`, `removeItem()`, `getTotal()`.

#### OrderModel
- Хранит текущий заказ: адрес, email, телефон, способ оплаты.
- Методы: `setField()`, `validate()`, `submit()`.

### Представления (View)
#### ProductCardView
- Отображает карточку товара в каталоге.
- Подписана на события клика: вызывает `cart:add`.

#### ModalView
- Управляет отображением модальных окон.
- Методы: `open(content)`, `close()`.

#### CartView
- Отображает корзину и общую сумму.
- Методы: `render()`, `removeItem()`.

#### FormView
- Отображает форму оформления заказа и ввода контактов.
- Методы: `collectData()`, `validate()`, `submit()`.

### Контроллеры (Controller)
#### CatalogController
- Получает данные от API и передаёт их в ProductView.

#### CartController
- Слушает события `cart:add`, `cart:remove`, управляет CartModel и CartView.

#### ModalController
- Управляет отображением модалок и передачей данных между слоями.

#### OrderController
- Получает данные с форм, валидирует, отправляет заказ через API.

## 4. Установка и запуск

1. Установи зависимости:
   ```bash
   npm install
   ```

2. Запусти сборку и локальный сервер:
   ```bash
   npm run dev
   ```

3. Открой `http://localhost:3000` в браузере.

Проект использует Vite/Webpack (в зависимости от конфигурации) и написан на TypeScript.
